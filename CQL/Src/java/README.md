# Overview

This is a multi-module project for CQL java libraries and proof-of-concept applications.
It contains the following sub-projects:

* **cql:** generates and builds Java lexers, parsers, listeners, and visitors using the CQL ANTLR4 grammar
* **poc/interpreter:** proof-of-concept interpreter (currently supporting only an _ageAt_ phrase)
* **poc/transltor:** proof-of-concept translator to generate executable javascript (in progress)

# Building the Project

This project uses the [Gradle](http://www.gradle.org/) build system.  A gradle wrapper, which automatically downloads
and uses an instance of gradle, is provided for convenience.  To build the project, simply execute the following
command:

    ./gradlew build

This will generate the ANTLR4 artifacts to `cql/src/generated`, build the CQL code library, build the 
proof--of-concept projects, and execute the simple tests.

To clean up the artifacts:

    ./gradlew clean

# Generating IDE Projects

You can generate an IDE project for IntelliJ IDEa:

    ./gradlew idea

In addition to creating project modules for cql, poc/interpreter, and poc/translator, this will also import
project modules for the CQL grammar and examples.

# Executing the Sample Code

You can execute the sample code using the `gradlew` command or a script generated by gradle.

To execute the sample code using `gradlew`, you must execute the `run` command, using the project-specific 
path.  The following are current possibilities:

    ./gradlew :cql:run
    ./gradlew :poc:interpreter:run
    ./gradlew :poc:translator:run

To execute the sample code using a script generated by gradle, first generate the scripts:

    ./gradlew installApp

Then execute the generated script (optionally passing in an argument).  The following example executes
the sample cql code with the path to a CQL file as an argument:

    ./cql/build/install/cql/bin/cql ../../Examples/ChlamydiaScreening_CQM.cql

You can also run the scripts for the proof-of-concept projects:

    ./poc/interpreter/build/install/interpreter/bin/interpreter
    ./poc/translator/build/install/translator/bin/translator